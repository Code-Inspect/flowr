name: "Full QA"
# Runs only on pull requests to the main branch and on manual triggers


concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}-${{ matrix.r-version }}-${{ matrix.os }}
  cancel-in-progress: true

on:
  pull_request:
    types: [opened, synchronize]
    branches: [ main ]
  workflow_dispatch:

jobs:
  test-full:
    strategy:
      fail-fast: false
      matrix:
        # currently we offer no official support for 3.x TODO: currently  '4.0.5' fails, as we can not detect that there is no pipe!
        r-version: [ '4.2.3', '4.1.0' ]
        os: [ ubuntu-latest, macos-latest, windows-latest ]
    name: "Test Suite (full)"
    uses: Code-Inspect/flowr/.github/workflows/run.yaml@145-improve-ci
    with:
      r-version: ${{ matrix.r-version }}
      image: ${{ matrix.os }}
      action: test-full
      coverage: false
