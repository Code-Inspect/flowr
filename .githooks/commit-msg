#!/usr/bin/env ruby
message_file = ARGV[0]
message = File.read(message_file)

$regex = /(feat|test|lint|refactor|ci|git|special|doc|log|ts|fix|wip)(-fix|-fail)?: .+/

if !$regex.match(message)
  puts "[POLICY] Your message is not formatted correctly. Respect the regex: '#{$regex}'!"
  exit 1
end